{#{% extends 'base.html.twig' %}#}

{#{% block body %}#}
{#    <h1>Film</h1>#}

{#    <div class="d-flex flex-wrap gap-3">#}
{#        <div class="card" style="width: 200px;">#}
{#            <img src="https://image.tmdb.org/t/p/w500{{ movie.picture }}" alt="{{ movie.title }}" class="card-img-top">#}
{#            <div class="card-body">#}
{#                <h5 class="card-title">{{ movie.title }}</h5>#}
{#                {% for genre in movie.genres %}#}
{#                    <p> {{ genre }} </p>#}
{#                {% endfor %}#}
{#                <p>{{ movie.releaseDate ? movie.releaseDate|date('d/m/Y') : 'Date inconnue' }}</p>#}

{#                <p>Popularité : {{ movie.popularity }}</p>#}


{#                <p> Companies de production : </p>#}
{#                {% for productionCompanie in movie.productionCompanies %}#}
{#                    <p> {{ productionCompanie.name }}, ({{ productionCompanie.originCountry }}) </p>#}
{#                    {% if(productionCompanie.logo) %}#}
{#                    <img src="https://image.tmdb.org/t/p/w500{{ productionCompanie.logo }}" alt="{{ productionCompanie.name }}"#}
{#                         class="card-img-top">#}
{#                    {% endif %}#}
{#                {% endfor %}#}
{#                <small>{{ movie.resume|length > 100 ? movie.resume|slice(0, 100) ~ '...' : movie.resume }}</small>#}
{#            </div>#}
{#        </div>#}
{#    </div>#}
{#{% endblock %}#}
{% extends 'base.html.twig' %}

{% block body %}
    <div class="container py-4">
        <a href="{{ path('app_index_movie') }}" class="btn btn-link mb-3 text-decoration-none text-black">&larr; Retour aux films</a>

        <div class="row g-4">
            {# Affiche #}
            <div class="col-12 col-md-4 col-lg-3">
                <div class="card bg-dark text-light h-100">
                    <img
                        src="https://image.tmdb.org/t/p/w500{{ movie.picture }}"
                        alt="{{ movie.title }}"
                        class="card-img-top"
                    >
                    <div class="card-body">
                        {% if movie.popularity is defined %}
                            <p class="mb-1">
                                <span class="badge bg-warning text-dark">
                                    ★ {{ movie.popularity|number_format(1, ',', ' ') }}
                                </span>
                            </p>
                        {% endif %}
                        <p class="mb-0 small text-muted">
                            Sortie :
                            {{ movie.releaseDate ? movie.releaseDate|date('d/m/Y') : 'Date inconnue' }}
                        </p>
                    </div>
                </div>
            </div>

            {# Infos principales #}
            <div class="col-12 col-md-8 col-lg-9">
                <h1 class="mb-2">{{ movie.title }}</h1>

                {% if movie.genres is defined and movie.genres|length > 0 %}
                    <p class="mb-2">
                        {% for genre in movie.genres %}
                            <span class="badge bg-secondary me-1 mb-1">{{ genre }}</span>
                        {% endfor %}
                    </p>
                {% endif %}

                {% if movie.status is defined and movie.status %}
                    <p class="text-muted mb-3">
                        Statut : <strong>{{ movie.status }}</strong>
                    </p>
                {% endif %}

                <h2 class="h5 mt-3">Synopsis</h2>
                <p class="lead">
                    {{ movie.resume ?: 'Aucun synopsis disponible pour ce film.' }}
                </p>

                {# Production companies #}
                {% if movie.productionCompanies is defined and movie.productionCompanies|length > 0 %}
                    <h2 class="h5 mt-4">Sociétés de production</h2>
                    <div class="row row-cols-1 row-cols-md-2 g-3">
                        {% for productionCompanie in movie.productionCompanies %}
                            <div class="col">
                                <div class="card h-100 border-0 bg-light">
                                    <div class="card-body d-flex align-items-center">
                                        {% if productionCompanie.logo %}
                                            <img
                                                src="https://image.tmdb.org/t/p/w200{{ productionCompanie.logo }}"
                                                alt="{{ productionCompanie.name }}"
                                                class="me-3"
                                                style="max-height: 60px; width: auto;"
                                            >
                                        {% endif %}
                                        <div>
                                            <h3 class="h6 mb-1">{{ productionCompanie.name }}</h3>
                                            {% if productionCompanie.originCountry %}
                                                <p class="mb-0 small text-muted">
                                                    Pays : {{ productionCompanie.originCountry }}
                                                </p>
                                            {% endif %}
                                        </div>
                                    </div>
                                </div>
                            </div>
                        {% endfor %}
                    </div>
                {% endif %}


                <div class="mt-4 d-flex flex-wrap gap-2">
                    <a href="#" class="btn btn-primary btn-sm">
                        Ajouter aux favoris
                    </a>
                    <a href="#" class="btn btn-outline-secondary btn-sm">
                        Ajouter à la liste à voir
                    </a>
                </div>
            </div>
        </div>
    </div>
{% endblock %}
