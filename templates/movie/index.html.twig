{#{% extends 'base.html.twig' %}#}

{#{% block body %}#}
{#    <h1>Films</h1>#}

{#    <div class="d-flex flex-wrap gap-3">#}
{#        {% for movie in movies %}#}
{#            <div class="card" style="width: 200px;">#}
{#                <img src="https://image.tmdb.org/t/p/w500{{ movie.picture }}" alt="{{ movie.title }}" class="card-img-top">#}
{#                <div class="card-body">#}
{#                    <h5 class="card-title">{{ movie.title }}</h5>#}
{#                    {% for genre in movie.genres %}#}
{#                        <p> {{ genre }} </p>#}
{#                    {% endfor %}#}
{#                    <p>{{ movie.releaseDate ? movie.releaseDate|date('d/m/Y') : 'Date inconnue' }}</p>#}
{#                    <small>{{ movie.resume|length > 100 ? movie.resume|slice(0, 100) ~ '...' : movie.resume }}</small>#}
{#                </div>#}
{#            </div>#}
{#        {% endfor %}#}
{#    </div>#}
{#{% endblock %}#}
{% extends 'base.html.twig' %}

{% block body %}

    {# NOW PLAYING #}
    <section class="mb-5">
        <div class="d-flex justify-content-between align-items-center mb-2">
            <h2 class="h4 m-0">En ce moment au cinéma</h2>
        </div>

        <div class="movies-row d-flex flex-row flex-nowrap gap-3 pb-2" style="overflow-x:auto;">
            {% for movie in now_playing_movies %}
                <article class="movie-card card bg-dark text-light" style="min-width: 180px;">
                    <img
                        src="https://image.tmdb.org/t/p/w300{{ movie.picture }}"
                        alt="{{ movie.title }}"
                        class="card-img-top"
                    >

                    <div class="card-body p-2">
                        <h3 class="card-title h6 text-truncate" title="{{ movie.title }}">
                            {{ movie.title }}
                        </h3>

                        <p class="mb-2 small">
                            {{ movie.releaseDate ? movie.releaseDate|date('d/m/Y') : 'Date inconnue' }}
                        </p>

                        <a href="{{ path('app_movies_show', {id: movie.tmdbId}) }}"
                           class="btn btn-sm btn-primary w-100">
                            Détails
                        </a>
                    </div>
                </article>
            {% else %}
                <p class="text-muted">Aucun film en ce moment.</p>
            {% endfor %}
        </div>
    </section>

    {# POPULAIRES #}
    <section class="mb-5">
        <div class="d-flex justify-content-between align-items-center mb-2">
            <h2 class="h4 m-0">Populaires</h2>
        </div>

        <div class="movies-row d-flex flex-row flex-nowrap gap-3 pb-2" style="overflow-x:auto;">
            {% for movie in popular_movies %}
                <article class="movie-card card bg-dark text-light" style="min-width: 180px;">
                    <img
                        src="https://image.tmdb.org/t/p/w300{{ movie.picture }}"
                        alt="{{ movie.title }}"
                        class="card-img-top"
                    >

                    <div class="card-body p-2">
                        <h3 class="card-title h6 text-truncate" title="{{ movie.title }}">
                            {{ movie.title }}
                        </h3>

                        <p class="mb-2 small">
                            {{ movie.releaseDate ? movie.releaseDate|date('d/m/Y') : 'Date inconnue' }}
                        </p>

                        <a href="{{ path('app_movies_show', {id: movie.tmdbId}) }}"
                           class="btn btn-sm btn-outline-light w-100">
                            Détails
                        </a>
                    </div>
                </article>
            {% else %}
                <p class="text-muted">Aucun film populaire trouvé.</p>
            {% endfor %}
        </div>
    </section>

    {# À VENIR #}
    <section class="mb-5">
        <div class="d-flex justify-content-between align-items-center mb-2">
            <h2 class="h4 m-0">À venir</h2>
        </div>

        <div class="movies-row d-flex flex-row flex-nowrap gap-3 pb-2" style="overflow-x:auto;">
            {% for movie in upcoming_movies %}
                <article class="movie-card card bg-dark text-light" style="min-width: 180px;">
                    <img
                        src="https://image.tmdb.org/t/p/w300{{ movie.picture }}"
                        alt="{{ movie.title }}"
                        class="card-img-top"
                    >

                    <div class="card-body p-2">
                        <h3 class="card-title h6 text-truncate" title="{{ movie.title }}">
                            {{ movie.title }}
                        </h3>

                        <p class="mb-2 small">
                            Sortie le {{ movie.releaseDate ? movie.releaseDate|date('d/m/Y') : 'Bientôt' }}
                        </p>

                        <a href="{{ path('app_movies_show', {id: movie.tmdbId}) }}"
                           class="btn btn-sm btn-outline-primary w-100">
                            Détails
                        </a>
                    </div>
                </article>
            {% else %}
                <p class="text-muted">Aucun film à venir.</p>
            {% endfor %}
        </div>
    </section>
{% endblock %}
